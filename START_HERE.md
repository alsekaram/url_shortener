# ๐ฏ START HERE - ะัััััะน ััะฐัั

## โ ะงัะพ ะณะพัะพะฒะพ

ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝัะน ัะตัะฒะธั ะดะปั ะพััะปะตะถะธะฒะฐะฝะธั ะฟะตัะตัะพะดะพะฒ ะฟะพ ะบะพัะพัะบะธะผ ัััะปะบะฐะผ:

- โ **FastAPI** - ะฐัะธะฝััะพะฝะฝัะน ะฒะตะฑ-ัะตัะฒะตั ั ัะตะดะธัะตะบัะฐะผะธ
- โ **SQLite + aiosqlite** - ะฑะฐะทะฐ ะดะฐะฝะฝัั ะดะปั ัััะปะพะบ ะธ ััะฐัะธััะธะบะธ
- โ **Typer CLI** - ัะฟัะฐะฒะปะตะฝะธะต ัะตัะตะท ะบะพะผะฐะฝะดะฝัั ัััะพะบั
- โ **Telegram Bot** - ะฐะฒัะพะผะฐัะธัะตัะบะธะต ะพััะตัั
- โ **APScheduler** - ะฟะปะฐะฝะธัะพะฒัะธะบ ะพััะตัะพะฒ
- โ **Docker + Docker Compose** - ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั
- โ **Makefile** - ัะดะพะฑะฝัะต ะบะพะผะฐะฝะดั
- โ **ะะพะบัะผะตะฝัะฐัะธั** - ะฟะพะดัะพะฑะฝัะต ะธะฝััััะบัะธะธ

## ๐ ะะฐะฟััะบ ะทะฐ 3 ัะฐะณะฐ

### 1. ะกะพะทะดะฐะนัะต .env ัะฐะนะป

```bash
cat > .env << 'EOF'
HOST=0.0.0.0
PORT=8000
DATABASE_PATH=/app/data/links.db

TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=123456789

DAILY_REPORT_TIME=09:00
WEEKLY_REPORT_DAY=monday
WEEKLY_REPORT_TIME=09:00
TIMEZONE=Europe/Moscow

LOG_LEVEL=INFO
EOF
```

**ะะฐะผะตะฝะธัะต:**
- `TELEGRAM_BOT_TOKEN` - ัะพะบะตะฝ ะพั @BotFather
- `TELEGRAM_CHAT_ID` - ะฒะฐั ID ะพั @userinfobot

### 2. ะะฐะฟัััะธัะต ัะตัะฒะธัั

```bash
docker compose up -d
```

### 3. ะัะพะฒะตัััะต ัะฐะฑะพัั

```bash
# ะัะพะฒะตัะธัั ะทะดะพัะพะฒัะต
curl http://localhost:8000/health

# ะกะพะทะดะฐัั ัะตััะพะฒัั ัััะปะบั
docker compose exec web uv run python -m src.cli create test https://google.com --title "Test Link"

# ะะพัะผะพััะตัั ัะฟะธัะพะบ
docker compose exec web uv run python -m src.cli list

# ะัะพัะตััะธัะพะฒะฐัั ัะตะดะธัะตะบั
curl -L http://localhost:8000/test
```

## ๐ ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั

### ะงะตัะตะท Makefile (ัะตะบะพะผะตะฝะดัะตััั)

```bash
# ะฃะฟัะฐะฒะปะตะฝะธะต
make up              # ะะฐะฟัััะธัั
make down            # ะััะฐะฝะพะฒะธัั
make restart         # ะะตัะตะทะฐะฟัััะธัั
make logs            # ะะพะณะธ

# ะะฐะฑะพัะฐ ัะพ ัััะปะบะฐะผะธ
make create CODE=doc1 URL=https://example.com TITLE="Doctor 1"
make list            # ะกะฟะธัะพะบ ะฒัะตั ัััะปะพะบ
make stats CODE=doc1 # ะกัะฐัะธััะธะบะฐ
make delete CODE=doc1

# ะััะตัั
make report-daily    # ะัะฟัะฐะฒะธัั ะดะฝะตะฒะฝะพะน ะพััะตั
make report-weekly   # ะัะฟัะฐะฒะธัั ะฝะตะดะตะปัะฝัะน ะพััะตั
```

### ะงะตัะตะท docker compose

```bash
# CLI ะบะพะผะฐะฝะดั
docker compose exec web uv run python -m src.cli create <code> <url> --title "Title"
docker compose exec web uv run python -m src.cli list
docker compose exec web uv run python -m src.cli stats <code>
docker compose exec web uv run python -m src.cli update <code> <new-url>
docker compose exec web uv run python -m src.cli delete <code>

# ะััะตัั
docker compose exec scheduler uv run python -m src.cli send-report daily
docker compose exec scheduler uv run python -m src.cli send-report weekly
```

## ๐ ะััะธัะตะบัััะฐ

### ะกะตัะฒะธัั

1. **web** (port 8000) - FastAPI ัะตัะฒะตั ะดะปั ัะตะดะธัะตะบัะพะฒ
2. **scheduler** - APScheduler ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะธั ะพััะตัะพะฒ  
3. **init** - ะธะฝะธัะธะฐะปะธะทะฐัะธั ะะ ะฟัะธ ััะฐััะต

### ะะพะผะฟะพะฝะตะฝัั

- `src/main.py` - FastAPI ะฟัะธะปะพะถะตะฝะธะต
- `src/cli.py` - CLI ะบะพะผะฐะฝะดั
- `src/database.py` - ะะฐะฑะพัะฐ ั SQLite
- `src/telegram.py` - Telegram ะธะฝัะตะณัะฐัะธั
- `src/scheduler.py` - ะะปะฐะฝะธัะพะฒัะธะบ
- `src/config.py` - ะะพะฝัะธะณััะฐัะธั
- `src/models.py` - Pydantic ะผะพะดะตะปะธ

## ๐ ะะพะบัะผะตะฝัะฐัะธั

- **README.md** - ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั (โญ๏ธ ัะธัะฐัั ะฟะตัะฒัะผ!)
- **QUICKSTART.md** - ะะพัะฐะณะพะฒะฐั ะธะฝััััะบัะธั
- **ENV_SETUP.md** - ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
- **START_HERE.md** - ะญัะพั ัะฐะนะป

## ๐ฏ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะกะพะทะดะฐัั ัััะปะบะธ ะดะปั ะฒัะฐัะตะน

```bash
make create CODE=ivanov URL=https://instagram.com/dr_ivanov TITLE="ะะพะบัะพั ะะฒะฐะฝะพะฒ"
make create CODE=petrov URL=https://vk.com/dr_petrov TITLE="ะะพะบัะพั ะะตััะพะฒ"
make create CODE=sidorov URL=https://t.me/dr_sidorov TITLE="ะะพะบัะพั ะกะธะดะพัะพะฒ"
```

### ะะพัะผะพััะตัั ะฒัะต ัััะปะบะธ

```bash
make list
```

ะัะฒะพะด:
```
โโโโโโโโโโโณโโโโโโโโโโโโโโโโโโโโโโโโโโโณโโโโโโโโโโโโโโโโโณโโโโโโโโโณโโโโโโโโโโโโโ
โ Code    โ URL                      โ Title          โ Clicks โ Created    โ
โกโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฉ
โ ivanov  โ https://instagram.com... โ ะะพะบัะพั ะะฒะฐะฝะพะฒ  โ     12 โ 2025-11-06 โ
โ petrov  โ https://vk.com/dr_petro..โ ะะพะบัะพั ะะตััะพะฒ  โ      8 โ 2025-11-06 โ
โ sidorov โ https://t.me/dr_sidorov  โ ะะพะบัะพั ะกะธะดะพัะพะฒ โ      5 โ 2025-11-06 โ
โโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโดโโโโโโโโโดโโโโโโโโโโโโโ
```

### ะะพัะผะพััะตัั ััะฐัะธััะธะบั

```bash
make stats CODE=ivanov DAYS=7
```

ะัะฒะพะด:
```
๐ Statistics: ivanov
   Title: ะะพะบัะพั ะะฒะฐะฝะพะฒ

Last 7 days: 12 clicks
Total all time: 12 clicks
Average per day: 1.7 clicks
```

### ะัะฟัะฐะฒะธัั ะพััะตั ะฒ Telegram

```bash
make report-daily
```

Telegram ะพััะตั:
```
๐ ะกัะฐัะธััะธะบะฐ ะทะฐ 24 ัะฐัะฐ
๐ 06.11.2025
โโโโโโโโโโโโโโโโโโโโ

๐จโโ๏ธ ะะพะบัะพั ะะฒะฐะฝะพะฒ
โโ ะกะตะณะพะดะฝั: 12 ๐
โโ ะัะตะณะพ: 12
โโ

๐จโโ๏ธ ะะพะบัะพั ะะตััะพะฒ
โโ ะกะตะณะพะดะฝั: 8 ๐
โโ ะัะตะณะพ: 8
โโ

โโโโโโโโโโโโโโโโโโโโ
ะัะตะณะพ: 20 ะฟะตัะตัะพะดะพะฒ
```

## ๐ ะัะพะฒะตัะบะฐ ัะฐะฑะพัั

### Healthcheck

```bash
curl http://localhost:8000/health
```

ะัะฒะตั:
```json
{
  "status": "healthy",
  "service": "link-tracker",
  "version": "0.1.0"
}
```

### ะขะตััะพะฒัะน ัะตะดะธัะตะบั

```bash
# ะกะพะทะดะฐัั ัััะปะบั
make create CODE=test URL=https://google.com

# ะัะพัะตััะธัะพะฒะฐัั (ะพัะบัะพะตััั Google)
curl -L http://localhost:8000/test
```

### API ััะฐัะธััะธะบะฐ

```bash
curl http://localhost:8000/api/links/test/stats | jq
```

## ๐๏ธ Troubleshooting

### ะกะตัะฒะธั ะฝะต ะทะฐะฟััะบะฐะตััั?

```bash
# ะัะพะฒะตัััะต ะปะพะณะธ
make logs

# ะะตัะตัะพะฑะตัะธัะต
make rebuild
```

### Telegram ะฝะต ัะฐะฑะพัะฐะตั?

1. ะัะพะฒะตัััะต ัะพะบะตะฝ ะธ chat_id ะฒ `.env`
2. ะัะฟัะฐะฒััะต ัะตััะพะฒัะน ะพััะตั: `make report-daily`
3. ะัะพะฒะตัััะต ะปะพะณะธ scheduler: `make logs-scheduler`

### ะะฐะทะฐ ะดะฐะฝะฝัั ะทะฐะฑะปะพะบะธัะพะฒะฐะฝะฐ?

```bash
make restart
```

## ๐ฆ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
url_shortener/
โโโ src/                    # ะััะพะดะฝัะน ะบะพะด
โ   โโโ main.py            # FastAPI ัะตัะฒะตั
โ   โโโ cli.py             # CLI ะบะพะผะฐะฝะดั
โ   โโโ database.py        # ะะ ะพะฟะตัะฐัะธะธ
โ   โโโ telegram.py        # Telegram ะฑะพั
โ   โโโ scheduler.py       # ะะปะฐะฝะธัะพะฒัะธะบ
โ   โโโ models.py          # Pydantic ะผะพะดะตะปะธ
โ   โโโ config.py          # ะะพะฝัะธะณััะฐัะธั
โโโ docker/
โ   โโโ Dockerfile         # Docker ะพะฑัะฐะท
โโโ data/                  # ะะฐะทะฐ ะดะฐะฝะฝัั (volume)
โ   โโโ links.db          # SQLite ะะ
โโโ docker-compose.yml     # Docker Compose
โโโ Makefile              # ะฃะดะพะฑะฝัะต ะบะพะผะฐะฝะดั
โโโ .env                  # ะะพะฝัะธะณััะฐัะธั (ัะพะทะดะฐัั!)
โโโ README.md             # ะะพะบัะผะตะฝัะฐัะธั
```

## ๐ ะกะปะตะดัััะธะต ัะฐะณะธ

1. โ ะะฐะฟัััะธัั ัะตัะฒะธัั: `docker compose up -d`
2. โ ะกะพะทะดะฐัั ะฟะตัะฒัั ัััะปะบั
3. โ ะัะพัะตััะธัะพะฒะฐัั ัะตะดะธัะตะบั
4. โ ะัะพะฒะตัะธัั ะพััะตัั ะฒ Telegram
5. ๐ ะัะพัะธัะฐัั ะฟะพะปะฝัั ะดะพะบัะผะตะฝัะฐัะธั ะฒ **README.md**

## ๐ก ะะพะปะตะทะฝัะต ัััะปะบะธ

- Web UI: http://localhost:8000
- Health: http://localhost:8000/health
- API Stats: http://localhost:8000/api/links/{code}/stats

## ๐ค ะะพะผะพัั

ะัะปะธ ััะพ-ัะพ ะฝะต ัะฐะฑะพัะฐะตั:

1. ๐ ะัะพัะธัะฐะนัะต [README.md](README.md#-troubleshooting)
2. ๐ ะัะพะฒะตัััะต ะปะพะณะธ: `make logs`
3. ๐ ะะตัะตะทะฐะฟัััะธัะต: `make restart`
4. ๐๏ธ ะะตัะตัะพะฑะตัะธัะต: `make rebuild`

---

**ะะพัะพะฒะพ ะบ ะฟัะพะดะฐะบัะตะฝั! ๐**

ะัะต ัะฐะฑะพัะฐะตั ัะตัะตะท Docker - ะฟัะพััะพ `docker compose up -d` ะธ ัะตัะฒะธั ะณะพัะพะฒ!


